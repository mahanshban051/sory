<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title> Ø¨Ø¨Ø®Ø´ÛŒØ¯ :) </title>
  <style>
    * {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  width: 100vw;
  height: 100vh;
  background: #f0f0f0;
  display: flex;
  justify-content: center;
  align-items: center;
  perspective: 1000px;
  overflow: hidden;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
}

#canvas-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1;
}

.wrapper {
  position: relative;
  width: 100vw;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background: url("https://i.imgur.com/WIxF2yX.jpeg");
  background-repeat: no-repeat;
  background-size: cover;
}

.heart {
  --c: rgb(174, 0, 255);
  width: 200px;
  aspect-ratio: 1;
  background: radial-gradient(at 70% 31%, var(--c) 29%, #0000 30%),
    radial-gradient(at 30% 31%, var(--c) 29%, #0000 30%),
    conic-gradient(from -45deg at 50% 84%, var(--c) 90deg, #0000 0) bottom/100%
      50% no-repeat;
}

.card {
  position: relative;
  width: 600px;
  height: 400px;
  background: white;
  border-radius: 15px;
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
  transform-origin: top;
  transform-style: preserve-3d;
  transition: transform 0.5s ease;
}

img {
  border-radius: 8px;
}

.card-content {
  padding: 10px;
  opacity: 0;
  transition: opacity 0.3s;
  text-align: center;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
}

.card.open {
  transform: rotateX(0deg);
}

.card.open .card-content {
  opacity: 1;
}

.cord-wrapper {
  position: absolute;
  top: -100px;
  left: 50%;
  transform: translateX(-50%);
  width: 40px;
  height: 200px;
  cursor: grab;
}

.plug {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 40px;
  height: 60px;
  fill: rgb(174, 0, 255);
  cursor: grab;
  transform: translateY(140px);
  transform-origin: 50% 0%;
  z-index: 20;
}

.plug:active {
  cursor: grabbing;
}

.ribbon {
  position: absolute;
  top: 0;
  left: 50%;
  width: 8px;
  height: 100%;
  transform-origin: top;
  transform: translateX(-50%);
}

.valentine-text {
  font-size: 24px;
  margin-bottom: 20px;
  color:rgb(174, 0, 255);
}

h1 {
  font-size: 32px;
  color:rgb(174, 0, 255);
  margin-bottom: 20px;
}

.valentine-congrats h1,
.valentine-sad h1 {
  margin-bottom: 0px;
}

.please,
.congrats,
.sad {
  width: 280px;
  /* height: 50px; */
}

.buttons {
  display: flex;
  flex-wrap: nowrap;
  flex-direction: row;
  justify-content: center;
  gap: 12px;
}

.buttons button {
  padding: 10px 20px;
  font-size: 16px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  width: 130px;
  transition: transform 0.2s ease;
}

.buttons button.yes {
  background-color: #4caf50;
  color: white;
}

.buttons button.no {
  background-color: rgb(255, 0, 0);
  color: white;
}
.text-intro {
  color: black;
  position: absolute;
  bottom: -40px;
  font-size: 20px;
  text-transform: capitalize;
  font-family: "Gill Sans", "Gill Sans MT", Calibri, "Trebuchet MS", sans-serif;
}
.footer-text {
  position: absolute;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 12px;
  color: white;
}
  </style>

</head>
<body>
<!-- partial:index.partial.html -->
<div id="canvas-container"></div>
<div class="wrapper">
  <div class="card">
    <p class="text-intro"></p>
    <div class="card-content">
      <!-- <div class="heart"></div> -->
      <div class="valentine-text" style="display: none">
        <h1> Ù…ÛŒØ´Ù‡ Ù…Ù†Ùˆ Ø¨Ø¨Ø®Ø´ÛŒ Ùˆ ÛŒÚ© ÙØ±ØµØª Ø¨Ø¯ÛŒØŸ</h1>
        <img src="img/26FLdmIp6wJr91JAI.webp" alt="please" class="please" />
      </div>
      <div class="buttons" style="display: none">
        <button class="yes">Ø¢Ø±Ù‡</button>
        <button class="no">Ù†Ù‡</button>
      </div>
      <div class="valentine-congrats" style="display: none">
        <h1> !Ø¢Ø®Ø¬ÙˆÙ†Ù…Ù… </h1>
        <p> !Ø¯ÙˆØ³Øª Ø¯Ø§Ø±Ù… Ø¯Ø®ØªØ±Ù… </p>
        <img src="img/n0IKF3qkeh671VAO45.gif" alt="congrats" class="congrats" />
      </div>
      <div class="valentine-sad" style="display: none">
      </div>
    </div>
    <div class="cord-wrapper">
      <svg width="40" height="200" class="cord">
        <path class="cord-path" d="M20,0 C20,50 20,150 20,200" />
      </svg>
      <svg class="plug" y="140" viewBox="0 0 100 160">
        <path d="M30,0 L70,0 L90,40 L90,140 L10,140 L10,40 Z" />
        <circle cx="35" cy="20" r="5" fill="white" />
        <circle cx="65" cy="20" r="5" fill="white" />
      </svg>
      <div class="ribbon"></div>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script>
const introText = document.querySelector(".text-intro");
introText.innerHTML = `Ø³Ù„Ø§Ù… Ø§ÛŒÙ† Ù†Ø®Ùˆ Ø¨Ú©Ø´ `;

// ========== physics setup ==========
const engine = Matter.Engine.create();
const world = engine.world;

const render = Matter.Render.create({
  element: document.getElementById("canvas-container"),
  engine: engine,
  options: {
    width: window.innerWidth,
    height: window.innerHeight,
    wireframes: false,
    background: "transparent"
  }
});

const segments = 10;
const segmentHeight = 150 / segments;
const points = [];
const constraints = [];

const card = document.querySelector(".card");
const cardRect = card.getBoundingClientRect();
const startX = window.innerWidth / 2;
const startY = cardRect.top;

for (let i = 0; i <= segments; i++) {
  const point = Matter.Bodies.circle(startX, startY + i * segmentHeight, 2, {
    friction: 0.5,
    restitution: 0.5,
    isStatic: i === 0,
    render: {
      visible: true,
      fillStyle: "#000000",
      strokeStyle: "#000000"
    }
  });
  points.push(point);
  Matter.World.add(world, point);
}

for (let i = 0; i < points.length - 1; i++) {
  const constraint = Matter.Constraint.create({
    bodyA: points[i],
    bodyB: points[i + 1],
    stiffness: 0.1,
    damping: 0.05,
    length: segmentHeight,
    render: {
      visible: true,
      strokeStyle: "#ff99ff",
      lineWidth: 1
    }
  });
  constraints.push(constraint);
  Matter.World.add(world, constraint);
}

const runner = Matter.Runner.create();
Matter.Runner.run(runner, engine);
Matter.Render.run(render);

let isDragging = false;
const cordWrapper = document.querySelector(".cord-wrapper");
const plug = document.querySelector(".plug");
const ribbon = document.querySelector(".ribbon");

plug.addEventListener("mousedown", startDrag);
plug.addEventListener("touchstart", startDrag);
document.addEventListener("mousemove", drag);
document.addEventListener("touchmove", drag);
document.addEventListener("mouseup", endDrag);
document.addEventListener("touchend", endDrag);

function startDrag(e) {
  e.preventDefault();
  isDragging = true;
  plug.style.cursor = "grabbing";
}

function drag(e) {
  if (!isDragging) return;
  const clientX = e.clientX || e.touches[0].clientX;
  const clientY = e.clientY || e.touches[0].clientY;
  const lastPoint = points[points.length - 1];
  Matter.Body.setPosition(lastPoint, { x: clientX, y: clientY });
  updateRibbon();

  if (clientY > cardRect.top + 300 && !card.classList.contains("open")) {
    openCard();
  }
}

function updateRibbon() {
  const segments = points.length;
  for (let i = 0; i < segments - 1; i++) {
    const current = points[i];
    const next = points[i + 1];
    const dx = next.position.x - current.position.x;
    const dy = next.position.y - current.position.y;
    const angle = Math.atan2(dy, dx);
    const segmentLength = Math.sqrt(dx * dx + dy * dy);

    gsap.set(ribbon, {
      height: segmentLength,
      rotation: angle * (180 / Math.PI),
      x: current.position.x - startX,
      y: current.position.y - startY
    });

    if (i === segments - 2) {
      gsap.set(plug, {
        x: next.position.x - startX,
        y: next.position.y - startY - 20,
        rotation: angle * (180 / Math.PI) - 90,
        transformOrigin: "50% 0%"
      });
    }
  }
}

function endDrag() {
  isDragging = false;
  plug.style.cursor = "grab";
}

function openCard() {
  card.classList.add("open");

  gsap.to(card, {
    y: "+=30",
    yoyo: true,
    repeat: 5,
    duration: 0.05,
    onComplete: () => gsap.set(card, { x: 0 })
  });

  confetti({
    particleCount: 300,
    spread: 100,
    origin: { y: 0.6 }
  });

  gsap.to(".plug path", {
    duration: 0.5,
    attr: { d: "M30,0 L70,0 L85,30 L85,120 L15,120 L15,30 Z" },
    ease: "power2.inOut"
  });

  gsap.to(".card-content", { opacity: 1, duration: 0.5, delay: 0.3 });
  gsap.to(".valentine-text, .buttons", {
    display: "block",
    opacity: 1,
    duration: 0.5,
    delay: 0.5
  });

  gsap.to([cordWrapper, ribbon], {
    opacity: 0,
    duration: 0.5,
    onComplete: () => {
      cordWrapper.style.display = "none";
      ribbon.style.display = "none";
    }
  });

  const tl = gsap.timeline();
  tl.to(".card", { rotateX: -10, duration: 0.2 })
    .to(".card", { rotateX: 0, duration: 0.1 })
    .to(".card", { rotateX: 10, duration: 0.14 })
    .to(".card", { rotateX: 0, duration: 0.05 })
    .repeat(2);

  gsap.to(".text-intro", {
    opacity: 0,
    duration: 0.5,
    onComplete: () => (introText.style.display = "none")
  });

  points.forEach((p) => (p.render.visible = false));
  constraints.forEach((c) => (c.render.visible = false));
}

// âœ… ØªØ´Ø®ÛŒØµ Ù…ÙˆØ¨Ø§ÛŒÙ„
function isMobile() {
  return window.innerWidth <= 1068;
}

const yesButton = document.querySelector(".buttons .yes");
const noButton = document.querySelector(".buttons .no");

yesButton.addEventListener("click", () => {
  const tl = gsap.timeline();
  gsap.to(".valentine-text, .buttons", {
    display: "none",
    opacity: 0,
    duration: 0.5
  });
  gsap.to(".valentine-congrats", {
    display: "block",
    opacity: 1,
    duration: 0.5,
    delay: 0.5
  });
  tl.to(".card", {
    width: window.innerWidth < 420 ? window.innerWidth : 1000,
    height: 540,
    duration: 1,
    ease: "power2.in"
  }).to(".congrats, .valentine-congrats", {
    width: "100%",
    height: "100%",
    duration: 1
  });

  confetti({ particleCount: 500, spread: 150, origin: { y: 0.6 } });
  setInterval(() => {
    confetti({ particleCount: 500, spread: 150, origin: { y: 0.6 } });
  }, 5000);
});

// âœ… Ø±ÙØªØ§Ø± Ø¯Ú©Ù…Ù‡ Ù†Ù‡ (ÙÙ‚Ø· Ø±ÙˆÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø­Ø±Ú©Øª Ú©Ù†Ù‡)
function moveNoButtonRandomly() {
  if (!isMobile()) return;

  const rect = noButton.getBoundingClientRect();
  const vw = window.innerWidth - rect.width;
  const vh = window.innerHeight - rect.height;

  const getRandom = (min, max) =>
    (Math.random() * (max - min) + min) * (Math.random() < 0.5 ? -1 : 1);

  let x = getRandom(100, 500);
  let y = getRandom(100, 500);

  if (rect.left + x < 0) x = Math.abs(x);
  if (rect.right + x > vw) x = -Math.abs(x);
  if (rect.top + y < 0) y = Math.abs(y);
  if (rect.bottom + y > vh) y = -Math.abs(y);

  gsap.to(noButton, {
    x: `+=${x}`,
    y: `+=${y}`,
    duration: 0.2,
    ease: "power2.out"
  });
}

let clickCount = 0;

noButton.addEventListener("click", () => {
  clickCount++;
  moveNoButtonRandomly();

  setTimeout(() => {
    if (clickCount === 1) alert("Ù†Ù‡ Ù†Ø¯Ø§Ø±ÛŒÙ… Ø¨Ø²Ù† Ø¢Ø±Ù‡ â¤ï¸ğŸ˜„");
    else if (clickCount === 3) alert("Ø¯ÛŒÚ¯Ù‡ Ù‚ÙˆÙ„ Ù…ÛŒØ¯Ù… Ø¢Ø¯Ù… Ø´Ù… Ù‡Ù…ÛŒÙ† ØµÙØ­Ù‡ Ø´Ø§Ù‡Ø¯Ù‡â¤ï¸ğŸ¥²");
    else if (clickCount === 5) alert("Ø§Ú¯Ù‡ ØªÙˆÙ†Ø³ØªÛŒ Ø¨Ø²Ù† Ù†Ù‡ ğŸ˜ğŸ˜‚â¤ï¸");
  }, 250);
});

function animate() {
  updateRibbon();
  requestAnimationFrame(animate);
}
animate();

gsap.set(".card", { rotateX: 0, transformPerspective: 1000 });
</script>


</body>
</html>
